<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Lan Read — Your first AI-powered reading companion</title>
  <meta name="description" content="Lan Read turns ePub/txt into a conversational mentor on iOS and iPadOS: instant summaries, skimming, ask-while-reading, optional iCloud sync and Notion export, privacy-first local storage." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Epilogue:wght@400;500;700&family=DM+Mono:wght@400;500&family=Newsreader:opsz,wght@6..72,500;6..72,700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #f3f1eb;
      --panel: #fffdf8;
      --paper-edge: #e8e1d5;
      --line: rgba(20,20,20,0.12);
      --text: #14110f;
      --muted: #5a5d61;
      --accent: #14110f;
      --radius: 18px;
      --grid: 120px;
      --paper-shadow: 0 20px 60px rgba(0,0,0,0.08);
    }
    * { box-sizing: border-box; }
    body {
      margin: 0; color: var(--text);
      background:
        radial-gradient(circle at 18% 16%, rgba(0,0,0,0.025), transparent 32%),
        radial-gradient(circle at 78% 8%, rgba(0,0,0,0.018), transparent 30%),
        var(--bg);
      font-family: "Epilogue", "DM Mono", system-ui, -apple-system, sans-serif;
      min-height: 100vh; overflow-x: hidden;
    }
    .grain {
      position: fixed; inset: 0; pointer-events: none; opacity: 0.12;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='120' viewBox='0 0 120 120'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='120' height='120' filter='url(%23n)' opacity='0.4'/%3E%3C/svg%3E");
      mix-blend-mode: multiply; z-index: 5;
    }
    .grid {
      position: fixed; inset: 0; pointer-events: none; z-index: 1;
      background-image:
        linear-gradient(var(--line) 1px, transparent 1px),
        linear-gradient(90deg, var(--line) 1px, transparent 1px);
      background-size: var(--grid) var(--grid);
      mask-image: radial-gradient(circle at center, rgba(0,0,0,1) 42%, rgba(0,0,0,0) 70%);
    }
    header {
      position: sticky; top: 0; z-index: 10;
      backdrop-filter: blur(14px);
      background: rgba(255,253,248,0.90);
      border-bottom: 1px solid var(--line);
    }
    nav {
      max-width: 1180px; margin: 0 auto; padding: 14px 28px;
      display: flex; align-items: center; justify-content: space-between; gap: 18px;
      font-size: 14px; letter-spacing: 0.03em;
    }
    .logo {
      display: flex; align-items: center; gap: 10px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.16em;
      font-family: "Newsreader", "Epilogue", serif;
    }
    .logo .dot { width: 12px; height: 12px; border: 2px solid var(--accent); border-radius: 50%; box-shadow: 0 0 0 6px rgba(0,0,0,0.05); }
    .nav-links { display: flex; gap: 10px; align-items: center; flex-wrap: wrap; }
    .lang-switch { display: flex; align-items: center; gap: 8px; color: var(--muted); font-size: 12px; text-transform: uppercase; letter-spacing: 0.08em; }
    .lang-switch select {
      padding: 7px 10px; border-radius: 12px; border: 1px solid var(--line);
      background: var(--panel); color: var(--text); font-size: 13px;
    }
    .pill {
      padding: 8px 14px; border: 1px solid var(--line); border-radius: 999px; color: var(--text); text-decoration: none; transition: border .3s, color .3s, background .3s;
    }
    .pill:hover { border-color: var(--accent); color: var(--accent); background: rgba(0,0,0,0.03); }
    .hero {
      position: relative; z-index: 2; max-width: 1180px; margin: 80px auto 120px; padding: 0 28px;
      display: grid; grid-template-columns: 1.05fr 0.95fr; gap: 44px; align-items: center;
    }
    .halo {
      position: absolute; inset: 12% auto auto -10%; width: 520px; height: 520px;
      background: radial-gradient(circle at 40% 40%, rgba(0,0,0,0.10), transparent 52%),
                  radial-gradient(circle at 68% 54%, rgba(0,0,0,0.06), transparent 60%);
      filter: blur(32px); opacity: 0.6; pointer-events: none;
    }
    h1 {
      font-size: clamp(42px, 4vw, 64px); line-height: 1.06; margin: 0 0 18px;
      letter-spacing: -0.02em;
      font-family: "Newsreader", "Epilogue", serif;
    }
    .lead { color: var(--muted); max-width: 540px; font-size: 17px; line-height: 1.7; margin-bottom: 22px; }
    .vision { color: var(--muted); font-size: 16px; margin-top: 18px; line-height: 1.6; max-width: 620px; }
    .cta-row { display: flex; gap: 14px; align-items: center; flex-wrap: wrap; }
    .btn {
      padding: 14px 22px; border-radius: 14px; border: 1px solid var(--accent);
      color: #ffffff; background: var(--accent); font-weight: 600; text-decoration: none;
      box-shadow: 0 12px 30px rgba(0,0,0,0.16); transition: transform .25s ease, box-shadow .25s ease, background .25s ease, color .25s ease;
    }
    .btn:hover { transform: translateY(-3px); box-shadow: 0 18px 42px rgba(0,0,0,0.20); }
    .ghost { background: transparent; color: var(--accent); border-color: var(--line); box-shadow: none; }
    .ghost:hover { border-color: var(--accent); color: var(--accent); background: rgba(0,0,0,0.05); }
    .book-hero {
      position: relative;
      padding: 10px 4px 12px;
    }
    .book-3d {
      position: relative;
      width: 100%;
      aspect-ratio: 5 / 3.7;
      perspective: 1800px;
      filter: drop-shadow(0 30px 50px rgba(0,0,0,0.14));
    }
    .book-cover {
      position: absolute;
      inset: 0;
      border-radius: 18px 10px 10px 18px;
      border: 1px solid rgba(18,15,12,0.32);
      background:
        radial-gradient(circle at 20% 12%, rgba(255,255,255,0.14), transparent 48%),
        linear-gradient(135deg, #4a3c2a 0%, #2d2318 44%, #1f1911 100%);
      color: #f7f0e2;
      padding: clamp(18px, 2.2vw, 30px);
      transform-origin: left center;
      transform-style: preserve-3d;
      transition: transform 1s cubic-bezier(0.2, 0.75, 0.1, 1), box-shadow .8s ease, opacity .8s ease;
      box-shadow:
        inset 0 0 0 1px rgba(247,240,226,0.08),
        inset 12px 0 30px rgba(0,0,0,0.35),
        0 12px 24px rgba(0,0,0,0.3);
      overflow: hidden;
      z-index: 6;
    }
    .book-3d.is-open .book-cover {
      transform: rotateY(-168deg);
      opacity: 0.1;
      box-shadow:
        inset 0 0 0 1px rgba(247,240,226,0.04),
        inset 16px 0 38px rgba(0,0,0,0.45),
        0 0 0 rgba(0,0,0,0);
      pointer-events: none;
    }
    .book-cover::before {
      content: "";
      position: absolute;
      inset: 14px;
      border: 1px solid rgba(247,240,226,0.24);
      border-radius: 10px;
    }
    .book-cover::after {
      content: "";
      position: absolute;
      inset: -30% -10% auto auto;
      width: 220px;
      height: 220px;
      border-radius: 50%;
      background: radial-gradient(circle, rgba(255,255,255,0.16), transparent 70%);
      transform: rotate(-18deg);
      pointer-events: none;
    }
    .cover-kicker {
      margin: 0;
      font-size: 11px;
      letter-spacing: 0.24em;
      text-transform: uppercase;
      color: rgba(247,240,226,0.82);
    }
    .book-cover h1 {
      margin: 16px 0 14px;
      font-size: clamp(28px, 3.2vw, 40px);
      line-height: 1;
      max-width: min(22ch, calc(100% - 22px));
      text-wrap: balance;
      color: #f9f3e8;
      text-shadow: 0 2px 8px rgba(0,0,0,0.24);
    }
    .cover-strip {
      display: grid;
      gap: 8px;
      max-width: 260px;
    }
    .cover-strip span {
      display: inline-flex;
      align-items: center;
      width: fit-content;
      padding: 4px 10px 5px;
      border-radius: 999px;
      border: 1px solid rgba(247,240,226,0.28);
      background: rgba(255,255,255,0.05);
      font-size: 11px;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: rgba(247,240,226,0.92);
    }
    .cover-emboss {
      position: absolute;
      left: clamp(20px, 2.8vw, 34px);
      right: 120px;
      bottom: 18px;
      padding-top: 10px;
      border-top: 1px solid rgba(247,240,226,0.22);
      font-size: 10px;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      color: rgba(247,240,226,0.74);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    .cover-open-corner {
      position: absolute;
      right: 14px;
      bottom: 12px;
      width: 92px;
      height: 82px;
      border: 0;
      border-radius: 12px;
      background: transparent;
      cursor: pointer;
      color: #fbf6ea;
      font-family: inherit;
    }
    .cover-open-corner::before {
      content: "";
      position: absolute;
      right: 0;
      bottom: 0;
      width: 0;
      height: 0;
      border-left: 56px solid transparent;
      border-top: 56px solid transparent;
      border-right: 0;
      border-bottom: 56px solid rgba(251,246,234,0.22);
      filter: drop-shadow(-2px -2px 6px rgba(0,0,0,0.24));
      transform-origin: right bottom;
      animation: cornerFlap 1.3s ease-in-out infinite;
      transition: border-bottom-color .25s ease;
    }
    .cover-open-corner::after {
      content: "↗";
      position: absolute;
      right: 10px;
      bottom: 10px;
      font-size: 20px;
      opacity: 0.9;
      transform: translateY(0);
      animation: arrowHint 1.2s ease-in-out infinite;
    }
    .cover-open-corner span {
      position: absolute;
      right: 12px;
      bottom: 56px;
      font-size: 10px;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      font-family: "DM Mono", monospace;
    }
    .cover-open-corner:hover::before { border-bottom-color: rgba(251,246,234,0.34); }
    .book-interior {
      position: absolute;
      inset: 0;
      border-radius: 10px 16px 16px 10px;
      border: 1px solid rgba(20,20,20,0.16);
      background:
        linear-gradient(90deg, rgba(10,10,10,0.16) 0, rgba(10,10,10,0.03) 6%, transparent 14%),
        linear-gradient(180deg, #fffdf8, #f7f1e4);
      overflow: hidden;
      box-shadow: inset 0 0 0 1px rgba(255,255,255,0.45), 0 16px 40px rgba(0,0,0,0.1);
      opacity: 0;
      transform: scale(0.985);
      transition: opacity .35s ease, transform .35s ease;
    }
    .book-3d.is-open .book-interior {
      opacity: 1;
      transform: scale(1);
    }
    .book-spine {
      position: absolute;
      top: 0;
      bottom: 0;
      left: -10px;
      width: 18px;
      border-radius: 14px 0 0 14px;
      background: linear-gradient(180deg, #382d1f, #271e14);
      border: 1px solid rgba(18,15,12,0.34);
      box-shadow: inset -2px 0 6px rgba(0,0,0,0.4);
    }
    .book-pages {
      position: absolute;
      inset: 14px 16px 60px;
      border-radius: 8px;
      background:
        linear-gradient(90deg, rgba(20,20,20,0.08), transparent 6%),
        linear-gradient(180deg, #fffef9, #faf3e7);
      border: 1px solid rgba(20,20,20,0.1);
      overflow: hidden;
    }
    .book-pages::before {
      content: "";
      position: absolute;
      inset: 0;
      background-image: linear-gradient(rgba(70,62,46,0.08) 1px, transparent 1px);
      background-size: 100% 35px;
      opacity: 0.72;
      pointer-events: none;
    }
    .book-page {
      position: absolute;
      inset: 0;
      padding: 18px 20px 20px;
      opacity: 0;
      transform: translateX(18px) scale(0.99);
      pointer-events: none;
      transition: opacity .32s ease, transform .38s ease;
    }
    .book-page.is-active {
      opacity: 1;
      transform: translateX(0) scale(1);
      pointer-events: auto;
    }
    .book-page.page-out-next { animation: pageOutNext .42s cubic-bezier(0.39, 0.05, 0.52, 0.97) forwards; }
    .book-page.page-out-prev { animation: pageOutPrev .42s cubic-bezier(0.39, 0.05, 0.52, 0.97) forwards; }
    .book-page.page-in-next { animation: pageInNext .42s cubic-bezier(0.29, 0.75, 0.27, 1) forwards; }
    .book-page.page-in-prev { animation: pageInPrev .42s cubic-bezier(0.29, 0.75, 0.27, 1) forwards; }
    .book-page-head {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      margin-bottom: 10px;
      position: relative;
      z-index: 1;
    }
    .ink-tag {
      display: inline-flex;
      align-items: center;
      padding: 5px 10px;
      border-radius: 999px;
      border: 1px solid rgba(20,20,20,0.17);
      background: rgba(20,20,20,0.04);
      font-size: 11px;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      color: #3f3a34;
    }
    .ink-meta {
      font-family: "DM Mono", monospace;
      font-size: 11px;
      color: #6b665f;
      letter-spacing: 0.04em;
    }
    .book-page h3 {
      margin: 0 0 8px;
      font-size: clamp(20px, 2vw, 26px);
      line-height: 1.15;
      font-family: "Newsreader", serif;
      position: relative;
      z-index: 1;
    }
    .book-page p {
      margin: 0;
      font-size: 15px;
      line-height: 1.62;
      color: #454038;
      position: relative;
      z-index: 1;
    }
    .streaming-block {
      margin-top: 14px;
      padding: 13px 14px;
      border: 1px solid rgba(20,20,20,0.12);
      border-radius: 10px;
      background: rgba(255,255,255,0.7);
      min-height: 122px;
    }
    .streaming-text {
      white-space: pre-wrap;
      min-height: 86px;
    }
    .streaming-text.is-typing::after {
      content: "▋";
      margin-left: 3px;
      animation: blinkCursor 0.8s steps(1, end) infinite;
    }
    .summary-points {
      margin: 12px 0 0;
      padding-left: 18px;
      color: #4b463e;
      display: grid;
      gap: 5px;
      font-size: 14px;
      line-height: 1.5;
      position: relative;
      z-index: 1;
    }
    .page-pill-list {
      display: grid;
      gap: 8px;
      margin-top: 14px;
    }
    .page-pill {
      padding: 8px 10px;
      border-radius: 9px;
      border: 1px solid rgba(20,20,20,0.14);
      background: rgba(255,255,255,0.58);
      font-size: 13px;
      color: #4e473d;
    }
    .page-illustration {
      margin-top: 14px;
      padding: 10px;
      border-radius: 10px;
      border: 1px solid rgba(20,20,20,0.14);
      background: rgba(255,255,255,0.62);
    }
    .page-illustration img {
      display: block;
      width: 100%;
      height: auto;
      border-radius: 8px;
      border: 1px solid rgba(20,20,20,0.1);
      background: linear-gradient(180deg, #fbf5e9, #f2e8d4);
    }
    .illustration-caption {
      margin: 8px 2px 0;
      font-size: 12px;
      line-height: 1.45;
      color: #625a4e;
      letter-spacing: 0.04em;
      text-transform: uppercase;
    }
    .book-foot {
      position: absolute;
      left: 14px;
      right: 14px;
      bottom: 10px;
      display: grid;
      grid-template-columns: 96px 1fr 96px;
      align-items: end;
      gap: 6px;
    }
    .page-corner {
      border: none;
      position: relative;
      height: 46px;
      width: 96px;
      background: transparent;
      cursor: pointer;
      font-family: "DM Mono", monospace;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      font-size: 11px;
      color: #4e4639;
      transition: transform .2s ease, opacity .2s ease;
    }
    .page-corner span {
      position: absolute;
      bottom: 5px;
      left: 14px;
      right: 14px;
      text-align: center;
      z-index: 2;
    }
    .page-corner::before {
      content: "";
      position: absolute;
      bottom: 0;
      width: 0;
      height: 0;
      border-style: solid;
      transition: filter .25s ease, transform .25s ease;
    }
    .page-corner::after {
      content: "";
      position: absolute;
      inset: 0;
      pointer-events: none;
      background: repeating-linear-gradient(45deg, rgba(0,0,0,0.05) 0 2px, transparent 2px 5px);
      opacity: 0;
      transition: opacity .25s ease;
    }
    .page-corner.prev::before {
      left: 0;
      border-width: 46px 0 0 68px;
      border-color: transparent transparent transparent rgba(228,216,198,0.95);
      animation: footHintPrev 1.4s ease-in-out infinite;
    }
    .page-corner.next::before {
      right: 0;
      border-width: 0 68px 46px 0;
      border-color: transparent rgba(228,216,198,0.95) transparent transparent;
      animation: footHintNext 1.4s ease-in-out infinite;
    }
    .page-corner:hover {
      transform: translateY(-2px);
    }
    .page-corner:hover::after { opacity: 0.45; }
    .page-corner:hover::before { filter: brightness(1.06); }
    .page-corner:disabled {
      opacity: 0.38;
      cursor: default;
      transform: none;
    }
    .page-corner:disabled::before {
      animation: none;
    }
    .page-counter {
      text-align: center;
      font-family: "DM Mono", monospace;
      font-size: 12px;
      color: #6f685e;
      letter-spacing: 0.08em;
      padding-bottom: 3px;
    }
    .book-hidden-subtitle {
      position: absolute;
      width: 1px;
      height: 1px;
      margin: -1px;
      padding: 0;
      border: 0;
      clip: rect(0 0 0 0);
      overflow: hidden;
    }
    @keyframes pageOutNext {
      0% { transform: translateX(0) rotateY(0deg); opacity: 1; }
      100% { transform: translateX(-26px) rotateY(-8deg); opacity: 0; }
    }
    @keyframes pageOutPrev {
      0% { transform: translateX(0) rotateY(0deg); opacity: 1; }
      100% { transform: translateX(26px) rotateY(8deg); opacity: 0; }
    }
    @keyframes pageInNext {
      0% { transform: translateX(26px) rotateY(8deg); opacity: 0; }
      100% { transform: translateX(0) rotateY(0); opacity: 1; }
    }
    @keyframes pageInPrev {
      0% { transform: translateX(-26px) rotateY(-8deg); opacity: 0; }
      100% { transform: translateX(0) rotateY(0); opacity: 1; }
    }
    @keyframes blinkCursor {
      0%, 48% { opacity: 1; }
      49%, 100% { opacity: 0; }
    }
    @keyframes cornerFlap {
      0%, 100% { transform: rotate(0deg) scale(1); }
      50% { transform: rotate(-8deg) scale(1.02); }
    }
    @keyframes arrowHint {
      0%, 100% { transform: translateY(0); opacity: 0.92; }
      50% { transform: translateY(-5px); opacity: 1; }
    }
    @keyframes footHintPrev {
      0%, 100% { transform: translateY(0); }
      50% { transform: translate(-3px, -2px); }
    }
    @keyframes footHintNext {
      0%, 100% { transform: translateY(0); }
      50% { transform: translate(3px, -2px); }
    }
    .stat-card {
      border: 1px solid var(--line); border-radius: var(--radius);
      padding: 18px 20px; background: var(--panel); backdrop-filter: blur(6px);
      display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 10px; margin-top: 14px;
      box-shadow: var(--paper-shadow);
    }
    .stat { display: flex; flex-direction: column; gap: 4px; }
    .stat strong { font-size: 18px; color: var(--accent); letter-spacing: 0.01em; }
    .monocard {
      border: 1px solid var(--line); border-radius: var(--radius);
      padding: 24px; background: linear-gradient(120deg, rgba(0,0,0,0.02), rgba(0,0,0,0));
      position: relative; overflow: hidden;
    }
    .monocard::before {
      content: ""; position: absolute; inset: 16px; border: 1px dashed var(--line); border-radius: var(--radius);
      mask-image: radial-gradient(circle at 50% 50%, rgba(0,0,0,0.9), rgba(0,0,0,0.2));
    }
    .outline-hero {
      width: 100%; aspect-ratio: 4/3; border: 1px solid var(--line); border-radius: 22px;
      position: relative; overflow: visible; background: var(--panel);
      box-shadow: var(--paper-shadow);
    }
    .outline-hero::before, .outline-hero::after {
      content: ""; position: absolute; inset: -12px; border: 1px solid var(--line);
      border-radius: 24px; background: var(--panel); z-index: -1;
      box-shadow: 0 14px 40px rgba(0,0,0,0.06);
    }
    .outline-hero::before { transform: rotate(-1deg); opacity: 0.7; }
    .outline-hero::after { transform: rotate(1.4deg); opacity: 0.5; }
    .outline-hero .lines {
      position: absolute; inset: 0;
      background-image:
        linear-gradient(90deg, rgba(0,0,0,0.10) 1px, transparent 1px),
        linear-gradient(rgba(0,0,0,0.10) 1px, transparent 1px);
      background-size: 36px 36px;
      animation: drift 18s linear infinite;
    }
    .outline-hero .orb {
      position: absolute; width: 160px; height: 160px; border: 1px solid var(--accent);
      border-radius: 50%; top: 22%; left: 18%;
      box-shadow: 0 0 0 14px rgba(0,0,0,0.06);
      filter: drop-shadow(0 0 22px rgba(0,0,0,0.12));
      background: radial-gradient(circle at 40% 40%, rgba(0,0,0,0.05), transparent 60%);
    }
    .outline-hero .chip {
      position: absolute; width: 200px; height: 120px; border: 1px solid var(--line);
      right: 12%; bottom: 18%; border-radius: 14px; background: rgba(0,0,0,0.02);
      display: grid; grid-template-rows: repeat(3, 1fr); gap: 6px; padding: 14px;
    }
    .chip .bar { border: 1px solid var(--line); border-radius: 8px; }
    @keyframes drift {
      0% { transform: translate3d(0,0,0); }
      100% { transform: translate3d(-36px,-36px,0); }
    }
    .section { max-width: 1180px; margin: 0 auto 120px; padding: 0 28px; position: relative; z-index: 2; }
    .section h2 { font-size: 26px; letter-spacing: 0.03em; text-transform: uppercase; color: var(--accent); margin-bottom: 16px; }
    .grid-3 { display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 18px; }
    .feature { border: 1px solid var(--line); border-radius: var(--radius); padding: 20px; background: var(--panel); min-height: 170px; box-shadow: 0 16px 40px rgba(0,0,0,0.06); position: relative; }
    .feature h3 { margin: 0 0 10px; font-size: 18px; letter-spacing: 0.01em; color: var(--text); display: flex; align-items: center; gap: 10px; }
    .feature p { margin: 0; color: var(--muted); line-height: 1.6; }
    .badge { display: inline-flex; align-items: center; gap: 6px; padding: 4px 10px; border-radius: 999px; background: rgba(20,20,20,0.06); border: 1px solid var(--line); color: var(--muted); font-size: 12px; letter-spacing: 0.02em; }
    .timeline {
      display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 14px;
    }
    .step {
      padding: 18px; border: 1px solid var(--line); border-radius: var(--radius);
      background: linear-gradient(100deg, rgba(0,0,0,0.02), rgba(0,0,0,0));
      position: relative;
    }
    .step::after {
      content: ""; position: absolute; inset: 12px; border: 1px dashed var(--line); border-radius: var(--radius);
      opacity: 0.5;
    }
    .step span { display: inline-flex; width: 32px; height: 32px; align-items: center; justify-content: center;
      border: 1px solid var(--accent); border-radius: 50%; color: var(--accent); font-weight: 600; margin-bottom: 12px; }
    footer {
      border-top: 1px solid var(--line); padding: 30px 28px 60px; color: var(--muted); background: rgba(247,248,250,0.8);
      position: relative; z-index: 2;
    }

    .paper-sheet {
      background: var(--panel);
      border: 1px solid var(--line);
      border-radius: 18px;
      padding: 28px 26px 30px;
      box-shadow: var(--paper-shadow);
      position: relative;
      overflow: hidden;
    }
    .paper-sheet::after {
      content: ""; position: absolute; inset: 12px; border-radius: 14px; border: 1px dashed rgba(20,20,20,0.06);
      pointer-events: none;
    }
    .paper-sheet.ruled {
      background-image: linear-gradient(rgba(20,20,20,0.04) 1px, transparent 1px);
      background-size: 100% 46px;
    }
    .paper-sheet .note-tab {
      position: absolute; left: -12px; top: 22px; width: 22px; height: 82px;
      background: linear-gradient(180deg, #d5c9b1, #e7dbc5);
      border: 1px solid rgba(20,20,20,0.15);
      border-radius: 10px 6px 6px 10px;
      box-shadow: 6px 12px 20px rgba(0,0,0,0.10);
    }
    .paper-sheet .paper-label {
      display: inline-flex; align-items: center; gap: 8px;
      font-size: 12px; letter-spacing: 0.08em; text-transform: uppercase;
      color: var(--muted); margin-bottom: 14px; padding: 6px 10px;
      border: 1px solid var(--line); border-radius: 999px; background: rgba(0,0,0,0.02);
    }
    .paper-sheet .paper-label::before {
      content: "§"; font-family: "DM Mono", monospace; color: var(--accent); font-size: 12px;
    }
    .paper-edge {
      position: absolute; inset: 18px -18px auto auto; height: 20px; background:
        linear-gradient(90deg, rgba(20,20,20,0.10) 32%, transparent 32%),
        var(--paper-edge);
      border-radius: 999px; opacity: 0.65;
    }
    .bookmark {
      position: absolute; right: 16px; top: -10px; width: 44px; height: 70px;
      background: linear-gradient(180deg, #111, #2b2b2b);
      clip-path: polygon(0 0, 100% 0, 100% 80%, 50% 100%, 0 80%);
      box-shadow: 0 12px 26px rgba(0,0,0,0.16);
    }
    .bookmark::after {
      content: "lan"; position: absolute; inset: 0; display: grid; place-items: center;
      color: #fff; font-size: 11px; letter-spacing: 0.14em; text-transform: uppercase;
      font-family: "DM Mono", monospace;
    }
    .privacy-list { list-style: none; padding: 0; margin: 0; display: grid; gap: 8px; color: var(--muted); line-height: 1.6; }

    @media (max-width: 900px) {
      .hero { grid-template-columns: 1fr; margin-top: 46px; }
      nav { padding: 12px 18px; flex-wrap: wrap; }
      .lang-switch { width: 100%; justify-content: flex-end; }
      .book-3d { aspect-ratio: 5 / 4.5; }
      .book-cover h1 { max-width: min(18ch, calc(100% - 18px)); }
      .book-pages { inset: 12px 12px 58px; }
      .book-page { padding: 15px 14px 16px; }
      .book-foot { left: 10px; right: 10px; grid-template-columns: 86px 1fr 86px; }
      .page-corner { width: 86px; }
      .page-corner.prev::before { border-width: 44px 0 0 60px; }
      .page-corner.next::before { border-width: 0 60px 44px 0; }
      .cta-row { margin-top: 14px; }
    }
    @media (max-width: 520px) {
      .book-cover { padding: 16px 14px 14px; }
      .cover-strip span { font-size: 10px; }
      .cover-open-corner { width: 74px; height: 70px; right: 8px; bottom: 8px; }
      .cover-open-corner::before { border-left: 46px solid transparent; border-top: 46px solid transparent; border-bottom: 46px solid rgba(251,246,234,0.22); }
      .cover-open-corner span { bottom: 46px; font-size: 9px; }
      .cover-emboss { right: 74px; }
    }
  </style>
</head>
<body>
  <div class="grid"></div>
  <div class="grain"></div>
  <header>
    <nav>
      <div class="logo"><div class="dot"></div><span data-key="brand.name">Lan Read</span></div>
      <div class="nav-links">
        <a class="pill" href="#features" data-key="nav.features">Features</a>
        <a class="pill" href="#workflow" data-key="nav.workflow">Workflow</a>
      </div>
      <div class="lang-switch">
        <label for="language" data-key="nav.language">Language</label>
        <select id="language" aria-label="Language selector">
          <option value="en">English</option>
          <option value="zh">中文</option>
          <option value="ja">日本語</option>
          <option value="ko">한국어</option>
        </select>
      </div>
    </nav>
  </header>

  <section class="hero">
    <div class="halo"></div>
    <div class="book-hero">
      <div class="book-3d" id="hero-book">
        <div class="book-spine" aria-hidden="true"></div>
        <div class="book-cover" id="book-cover">
          <p class="cover-kicker">Lan Read · Edition 2026</p>
          <h1 data-key="hero.title">Your first AI-powered reading companion</h1>
          <div class="cover-strip" id="cover-strip"></div>
          <p class="cover-emboss" id="cover-emboss"></p>
          <button class="cover-open-corner" id="book-open-trigger" type="button" aria-label="Open book">
            <span id="book-open-label">Open</span>
          </button>
        </div>
        <div class="book-interior" id="book-interior">
          <div class="book-pages" id="book-pages">
            <article class="book-page is-active" data-page-index="0">
              <div class="book-page-head">
                <span class="ink-tag" id="summary-tag">AI Summary</span>
                <span class="ink-meta" id="summary-meta">Streaming</span>
              </div>
              <h3 id="summary-title">What this app does</h3>
              <div class="streaming-block">
                <p class="streaming-text" id="summary-stream"></p>
              </div>
              <ul class="summary-points" id="summary-points"></ul>
            </article>
            <article class="book-page" data-page-index="1">
              <div class="book-page-head">
                <span class="ink-tag" id="skim-tag">Skim Read</span>
                <span class="ink-meta" id="skim-meta">Chapter skeleton</span>
              </div>
              <h3 id="skim-title">Read fast, decide where to dive</h3>
              <p id="skim-body"></p>
              <div class="page-pill-list" id="skim-pills"></div>
            </article>
            <article class="book-page" data-page-index="2">
              <div class="book-page-head">
                <span class="ink-tag" id="platforms-tag">Products</span>
                <span class="ink-meta" id="platforms-meta">Coverage</span>
              </div>
              <h3 id="platforms-title"></h3>
              <p id="platforms-body"></p>
              <div class="page-illustration">
                <img id="platforms-image" src="content/device-lineup.svg" alt="Lan Read products on iPhone and iPad" loading="lazy" />
                <p class="illustration-caption" id="platforms-image-caption"></p>
              </div>
            </article>
            <article class="book-page" data-page-index="3">
              <div class="book-page-head">
                <span class="ink-tag" id="storage-tag">Storage</span>
                <span class="ink-meta" id="storage-meta">Local-first</span>
              </div>
              <h3 id="storage-title"></h3>
              <p id="storage-body"></p>
            </article>
            <article class="book-page" data-page-index="4">
              <div class="book-page-head">
                <span class="ink-tag" id="sync-tag">Sync</span>
                <span class="ink-meta" id="sync-meta">Optional cloud</span>
              </div>
              <h3 id="sync-title"></h3>
              <p id="sync-body"></p>
            </article>
            <article class="book-page" data-page-index="5">
              <div class="book-page-head">
                <span class="ink-tag" id="export-tag">Export</span>
                <span class="ink-meta" id="export-meta">Notion</span>
              </div>
              <h3 id="export-title"></h3>
              <p id="export-body"></p>
            </article>
          </div>
          <div class="book-foot">
            <button class="page-corner prev" id="book-prev" type="button" aria-label="Previous page">
              <span id="book-prev-label">Prev</span>
            </button>
            <div class="page-counter" id="book-counter">01 / 06</div>
            <button class="page-corner next" id="book-next" type="button" aria-label="Next page">
              <span id="book-next-label">Next</span>
            </button>
          </div>
        </div>
      </div>
      <p class="book-hidden-subtitle" data-key="hero.subtitle">Import ePub or text, open to see AI summaries, skim chapters fast, and ask questions as you read. Local-first by default with optional iCloud sync and Notion export.</p>
      <p class="vision" id="vision-line">Make every book a conversational mentor so you understand, remember, and discuss faster.</p>
    </div>
    <div class="outline-hero">
      <div class="bookmark" aria-hidden="true"></div>
      <div class="lines" id="lines"></div>
      <div class="orb"></div>
      <div class="chip">
        <div class="bar"></div><div class="bar"></div><div class="bar"></div>
      </div>
    </div>
  </section>

  <section class="section" id="features">
    <h2 data-key="features.title">Features</h2>
    <div class="paper-sheet">
      <div class="paper-label" data-key="labels.chapters">Features</div>
      <div class="grid-3" id="feature-grid"></div>
      <p class="vision" id="features-privacy-note">No required signup. Library stays local; cloud sync, secure key exchange, and AI calls remain opt-in.</p>
      <div class="paper-edge" aria-hidden="true"></div>
    </div>
  </section>

  <section class="section" id="privacy">
    <h2 data-key="privacy.title">Privacy &amp; sync</h2>
    <div class="paper-sheet ruled">
      <div class="paper-label" data-key="labels.privacy">Privacy</div>
      <ul class="privacy-list" id="privacy-lines"></ul>
      <div class="paper-edge" aria-hidden="true"></div>
    </div>
  </section>

  <section class="section" id="workflow">
    <h2 data-key="workflow.title">Workflow</h2>
    <div class="paper-sheet ruled">
      <div class="paper-label" data-key="labels.notebook">Workflow</div>
      <div class="timeline" id="workflow-grid"></div>
      <div class="paper-edge" aria-hidden="true"></div>
    </div>
  </section>

  <footer>
    <div style="max-width:1180px; margin:0 auto; display:flex; justify-content:space-between; gap:10px; flex-wrap:wrap;">
      <span data-key="footer.note">© 2026 Lan Read — Your first AI-powered reading companion.</span>
      <span style="display:flex; gap:12px; flex-wrap:wrap;">
        <a class="pill" href="/privacy" data-key="footer.privacy">Privacy</a>
        <a class="pill" href="/terms" data-key="footer.terms">Terms</a>
        <a class="pill" href="changelog.html" data-key="footer.changelog">Changelog</a>
        <a class="pill" href="support.html" data-key="footer.support">Support</a>
      </span>
    </div>
  </footer>

  <script>
    const lines = document.getElementById('lines');
    window.addEventListener('mousemove', (e) => {
      const x = (e.clientX / window.innerWidth - 0.5) * 10;
      const y = (e.clientY / window.innerHeight - 0.5) * 10;
      lines.style.transform = `translate3d(${x}px, ${y}px, 0)`;
    });

    const languageSelect = document.getElementById('language');
    const featureGrid = document.getElementById('feature-grid');
    const workflowGrid = document.getElementById('workflow-grid');
    const factGrid = document.getElementById('fact-grid');
    const privacyLines = document.getElementById('privacy-lines');
    const visionLine = document.getElementById('vision-line');
    const featuresPrivacyNote = document.getElementById('features-privacy-note');
    const heroBook = document.getElementById('hero-book');
    const bookOpenTrigger = document.getElementById('book-open-trigger');
    const bookPrevButton = document.getElementById('book-prev');
    const bookNextButton = document.getElementById('book-next');
    const bookCounter = document.getElementById('book-counter');
    const bookOpenLabel = document.getElementById('book-open-label');
    const bookPrevLabel = document.getElementById('book-prev-label');
    const bookNextLabel = document.getElementById('book-next-label');
    const coverStrip = document.getElementById('cover-strip');
    const coverEmboss = document.getElementById('cover-emboss');
    const summaryTag = document.getElementById('summary-tag');
    const summaryMeta = document.getElementById('summary-meta');
    const summaryTitle = document.getElementById('summary-title');
    const summaryStream = document.getElementById('summary-stream');
    const summaryPoints = document.getElementById('summary-points');
    const skimTag = document.getElementById('skim-tag');
    const skimMeta = document.getElementById('skim-meta');
    const skimTitle = document.getElementById('skim-title');
    const skimBody = document.getElementById('skim-body');
    const skimPills = document.getElementById('skim-pills');
    const platformsTag = document.getElementById('platforms-tag');
    const platformsMeta = document.getElementById('platforms-meta');
    const platformsTitle = document.getElementById('platforms-title');
    const platformsBody = document.getElementById('platforms-body');
    const platformsImage = document.getElementById('platforms-image');
    const platformsImageCaption = document.getElementById('platforms-image-caption');
    const storageTag = document.getElementById('storage-tag');
    const storageMeta = document.getElementById('storage-meta');
    const storageTitle = document.getElementById('storage-title');
    const storageBody = document.getElementById('storage-body');
    const syncTag = document.getElementById('sync-tag');
    const syncMeta = document.getElementById('sync-meta');
    const syncTitle = document.getElementById('sync-title');
    const syncBody = document.getElementById('sync-body');
    const exportTag = document.getElementById('export-tag');
    const exportMeta = document.getElementById('export-meta');
    const exportTitle = document.getElementById('export-title');
    const exportBody = document.getElementById('export-body');
    const bookPages = Array.from(document.querySelectorAll('.book-page'));

    let bookOpen = false;
    let currentBookPage = 0;
    let streamTimer = null;
    let streamToken = 0;
    let currentBookLocale = null;

    const setText = (selector, value) => {
      const node = document.querySelector(selector);
      if (node && value) node.textContent = value;
    };

    const fallbackEn = {
      meta: {
        title: 'Lan Read — Your first AI-powered reading companion',
        description: 'Lan Read turns ePub/txt into a conversational mentor on iOS and iPadOS: instant summaries, skimming, ask-while-reading, optional iCloud sync and Notion export, privacy-first local storage.'
      },
      brand: { name: 'Lan Read', tagline: 'Your first AI-Powered Reading Companion' },
      nav: { features: 'Features', workflow: 'Workflow', language: 'Language' },
      labels: { fieldnote: 'Product note', chapters: 'Features', notebook: 'Workflow', privacy: 'Privacy' },
      hero: {
        title: 'Your first AI-powered reading companion',
        subtitle: 'Import ePub or text, open to see AI summaries, skim chapters fast, and ask questions as you read. Local-first by default with optional iCloud sync and Notion export.',
        primaryCta: 'Explore features',
        secondaryCta: 'See workflow'
      },
      vision: 'Make every book a conversational mentor so you understand, remember, and discuss faster.',
      facts: [
        { label: 'Platforms', value: 'iOS / iPadOS (macOS planned)' },
        { label: 'Storage', value: 'Local-first, no required signup' },
        { label: 'Sync', value: 'Optional iCloud (CloudKit) sync' },
        { label: 'Export', value: 'Notion export for highlights and bookmarks' }
      ],
      features: {
        title: 'Features',
        items: [
          { title: 'Local Book Import', body: 'Bring your own ePub or .txt from Files or iCloud Drive; keep your library local.' },
          { title: 'Instant AI Summaries', body: 'Open a book to see a concise overview and chapter structure with caching and manual refresh.' },
          { title: 'Skimming Mode', body: 'Chapter skeleton summaries with quick navigation for fast context building.' },
          { title: 'Ask While Reading', body: 'Ask about selected text, a chapter, or the whole book—explain, translate, or give examples; selection shortcuts are planned.', status: 'planned' },
          { title: 'Reader Essentials', body: 'TOC, search, bookmarks, highlights, annotations, themes, adjustable fonts and line spacing, night mode.' },
          { title: 'Sync & Export', body: 'Optional CloudKit sync across devices plus Notion export for bookmarks and highlights.' },
          { title: 'Comprehension Checks (planned)', body: 'Diagnostics and quizzes to test recall are designed and planned.', status: 'planned' }
        ],
        privacyNote: 'No required signup. Library stays local; cloud sync, secure key exchange, and AI calls remain opt-in.'
      },
      workflow: {
        title: 'Workflow',
        steps: [
          { title: 'Import', body: 'Add ePub or text files from Files or iCloud Drive.' },
          { title: 'Summarize', body: 'Open a book to get the AI overview and chapter skeleton; results are cached for reuse.' },
          { title: 'Read & Ask', body: 'Highlight to ask, translate, or get examples while reading; selection shortcuts are planned.' },
          { title: 'Sync / Export', body: 'Turn on iCloud sync when you want and export highlights/bookmarks to Notion.' }
        ]
      },
      privacy: {
        title: 'Privacy & sync',
        lines: [
          'Local-first by default; your library stays on device unless you enable cloud features.',
          'Optional CloudKit sync and FastAPI key exchange keep credentials off the client while still anonymizing requests where possible.',
          'No required registration. AI prompts avoid sending account identifiers; telemetry is minimal and focused on reliability.'
        ]
      },
      footer: {
        note: '© 2026 Lan Read — Your first AI-powered reading companion.',
        privacy: 'Privacy',
        terms: 'Terms',
        changelog: 'Changelog',
        support: 'Support'
      }
    };

    const content = {};

    const loadLanguageFile = async (lang) => {
      try {
        const res = await fetch(`content/${lang}.json`);
        if (!res.ok) throw new Error('Failed to load content');
        content[lang] = await res.json();
      } catch (err) {
        if (lang === 'en' && !content.en) content.en = fallbackEn;
        console.warn(`Using fallback copy for ${lang}`, err);
      }
    };

    const renderFacts = (facts = []) => {
      if (!factGrid) return;
      factGrid.innerHTML = facts.map(fact => `
        <div class="stat">
          <span>${fact.label}</span>
          <strong>${fact.value}</strong>
        </div>
      `).join('');
    };

    const renderFeatures = (features, lang) => {
      if (!featureGrid) return;
      const plannedLabelMap = { zh: '规划中', ja: '予定', ko: '예정', en: 'Planned' };
      const plannedLabel = plannedLabelMap[lang] || plannedLabelMap.en;
      featureGrid.innerHTML = (features?.items || []).map(item => `
        <div class="feature">
          <h3>${item.title}${item.status ? `<span class="badge">${plannedLabel}</span>` : ''}</h3>
          <p>${item.body}</p>
        </div>
      `).join('');
      if (featuresPrivacyNote) featuresPrivacyNote.textContent = features?.privacyNote || '';
    };

    const renderWorkflow = (workflow) => {
      if (!workflowGrid) return;
      workflowGrid.innerHTML = (workflow?.steps || []).map((step, idx) => {
        const number = String(idx + 1).padStart(2, '0');
        return `
          <div class="step">
            <span>${number}</span>
            <strong>${step.title}</strong>
            <p class="lead" style="font-size:15px;margin-top:6px;">${step.body}</p>
          </div>
        `;
      }).join('');
    };

    const renderPrivacy = (privacy) => {
      if (!privacyLines) return;
      privacyLines.innerHTML = (privacy?.lines || []).map(line => `<li>${line}</li>`).join('');
      setText('[data-key="privacy.title"]', privacy?.title);
    };

    const bookLocale = (lang, t) => {
      const facts = t.facts || fallbackEn.facts;
      const storageFact = facts[1] || { label: 'Storage', value: '' };
      const syncFact = facts[2] || { label: 'Sync', value: '' };
      const exportFact = facts[3] || { label: 'Export', value: '' };
      if (lang === 'zh') {
        return {
          openLabel: '翻开',
          coverLabel: '封皮',
          prevLabel: '上一页',
          nextLabel: '下一页',
          coverStrip: ['AI Summary', 'Skim read', 'Products', 'Sync', 'Export'],
          coverEmboss: 'summary · skim · products · storage · sync · export',
          summaryTag: 'AI Summary',
          summaryMeta: '流式输出',
          summaryTitle: '这本 App 做了什么',
          summaryStream: `Lan Read 把你的 ePub / txt 书库变成一个可对话阅读伙伴。\n\n它会在你打开书时给出 AI 摘要，帮助你先建立整体脉络；你可以用 Skim read 快速扫章节，再按需深入；同时支持可选 iCloud 同步与 Notion 导出，让阅读记录在“默认本地优先”的前提下按你的节奏流动。`,
          summaryPoints: [
            '打开即看摘要，减少进入成本',
            'Skim read 先抓骨架，再深入细读',
            '同步与导出都是可选，不打断本地阅读'
          ],
          skimTag: 'Skim read',
          skimMeta: '章节骨架',
          skimTitle: '先看全貌，再决定读哪里',
          skimBody: 'Skim read 会把章节压缩成骨架，让你在几分钟内定位重点、争议点与关键名词，不需要逐页滚动。',
          skimPills: ['章节级摘要', '快速跳转上下文', '先筛选再深读'],
          platformsTag: 'Products',
          platformsMeta: '覆盖范围',
          platformsTitle: '产品: iPhone / iPad（Mac 规划中）',
          platformsBody: '当前体验聚焦具体设备而非系统概念：在 iPhone 上强调单手快速进入，在 iPad 上强调大屏长时阅读与分屏协作。',
          platformsImageAlt: 'Lan Read 在 iPhone 与 iPad 上的产品形态',
          platformsImageCaption: '产品形态：iPhone + iPad，Mac 版本规划中。',
          storageTag: 'Storage',
          storageMeta: '本地优先',
          storageTitle: `${storageFact.label}: ${storageFact.value}`,
          storageBody: '默认本地保存让你不需要先注册账号再开始读书。是否上云由你决定，库数据与阅读轨迹可以持续留在设备里。',
          syncTag: 'Sync',
          syncMeta: '可选云端',
          syncTitle: `${syncFact.label}: ${syncFact.value}`,
          syncBody: '当你需要多设备延续阅读时再开启同步。设计上保持“可选开启、可控范围”，让云端只在你需要时介入。',
          exportTag: 'Export',
          exportMeta: '知识流转',
          exportTitle: `${exportFact.label}: ${exportFact.value}`,
          exportBody: '高亮和书签可导出到 Notion，把阅读结果接入你的知识管理流程，方便复盘、整理与后续写作。'
        };
      }
      if (lang === 'ja') {
        return {
          openLabel: '開く',
          coverLabel: '表紙',
          prevLabel: '前へ',
          nextLabel: '次へ',
          coverStrip: ['AI要約', 'Skim read', '製品', '同期', 'エクスポート'],
          coverEmboss: 'summary · skim · products · storage · sync · export',
          summaryTag: 'AI要約',
          summaryMeta: 'ストリーミング',
          summaryTitle: 'このアプリでできること',
          summaryStream: `Lan Read は、あなたの ePub / txt ライブラリを会話できる読書パートナーに変えます。\n\n本を開くと AI 要約で全体像を素早く把握でき、Skim read で章の骨格を短時間で確認できます。さらに、必要なときだけ iCloud 同期や Notion エクスポートを使えるため、ローカルファーストの読書体験を崩しません。`,
          summaryPoints: [
            'AI要約ですぐに全体像を把握',
            '章の骨格を先に見てから深読み',
            '同期とエクスポートは必要時のみ有効化'
          ],
          skimTag: 'Skim read',
          skimMeta: '章の骨格',
          skimTitle: '全体を先に把握して、読む場所を決める',
          skimBody: 'Skim read は章を構造化して要点を抽出し、優先ポイントや論点、重要語を数分で見つけられるようにします。',
          skimPills: ['章単位の要約', '文脈へ素早くジャンプ', '先に絞ってから深く読む'],
          platformsTag: '製品',
          platformsMeta: '対応範囲',
          platformsTitle: '製品: iPhone / iPad（Mac は計画中）',
          platformsBody: 'OS 名称ではなく製品体験として設計しています。iPhone は片手での短時間利用、iPad は長時間読書と分割表示に最適化されています。',
          platformsImageAlt: 'iPhone と iPad 上の Lan Read 製品体験',
          platformsImageCaption: '製品フォーカス: iPhone + iPad（Mac は計画中）。',
          storageTag: '保存',
          storageMeta: 'ローカル優先',
          storageTitle: `${storageFact.label}: ${storageFact.value}`,
          storageBody: 'アカウント登録なしですぐ読書を始められます。明示的にクラウドを選ぶまで、書籍と読書履歴は端末内に保持されます。',
          syncTag: '同期',
          syncMeta: '任意のクラウド',
          syncTitle: `${syncFact.label}: ${syncFact.value}`,
          syncBody: '複数デバイスで続きを読みたいときだけ同期を有効化できます。クラウド利用はオプトインで、範囲もユーザーが制御できます。',
          exportTag: 'エクスポート',
          exportMeta: '知識フロー',
          exportTitle: `${exportFact.label}: ${exportFact.value}`,
          exportBody: 'ハイライトやブックマークを Notion に送ることで、読書結果をメモ、振り返り、執筆の流れに接続できます。'
        };
      }
      if (lang === 'ko') {
        return {
          openLabel: '열기',
          coverLabel: '표지',
          prevLabel: '이전',
          nextLabel: '다음',
          coverStrip: ['AI 요약', 'Skim read', '제품', '동기화', '내보내기'],
          coverEmboss: 'summary · skim · products · storage · sync · export',
          summaryTag: 'AI 요약',
          summaryMeta: '스트리밍',
          summaryTitle: '이 앱이 하는 일',
          summaryStream: `Lan Read는 당신의 ePub / txt 라이브러리를 대화형 읽기 파트너로 바꿉니다.\n\n책을 열면 AI 요약으로 먼저 큰 흐름을 파악하고, Skim read로 장별 구조를 빠르게 훑을 수 있습니다. 필요할 때만 iCloud 동기화와 Notion 내보내기를 켤 수 있어 로컬 우선 경험을 유지합니다.`,
          summaryPoints: [
            'AI 요약으로 빠른 전체 파악',
            '장 구조를 먼저 보고 필요한 부분만 깊게 읽기',
            '동기화와 내보내기는 선택적으로 사용'
          ],
          skimTag: 'Skim read',
          skimMeta: '챕터 골격',
          skimTitle: '먼저 전체를 보고, 읽을 위치를 결정',
          skimBody: 'Skim read는 장 내용을 구조 단위로 압축해 핵심 포인트, 논점, 용어를 몇 분 안에 찾도록 도와줍니다.',
          skimPills: ['챕터 단위 요약', '빠른 문맥 점프', '먼저 선별 후 정독'],
          platformsTag: '제품',
          platformsMeta: '지원 범위',
          platformsTitle: '제품: iPhone / iPad (Mac 예정)',
          platformsBody: 'OS 라벨보다 제품 경험 중심으로 설계했습니다. iPhone은 한 손의 빠른 사용, iPad는 장시간 읽기와 분할 화면에 최적화됩니다.',
          platformsImageAlt: 'iPhone과 iPad에서의 Lan Read 제품 경험',
          platformsImageCaption: '제품 초점: iPhone + iPad, Mac은 계획 중.',
          storageTag: '저장',
          storageMeta: '로컬 우선',
          storageTitle: `${storageFact.label}: ${storageFact.value}`,
          storageBody: '계정 등록 없이 바로 읽기를 시작할 수 있습니다. 클라우드를 선택하기 전까지 책과 읽기 기록은 기기에 로컬로 유지됩니다.',
          syncTag: '동기화',
          syncMeta: '선택형 클라우드',
          syncTitle: `${syncFact.label}: ${syncFact.value}`,
          syncBody: '여러 기기에서 이어 읽기가 필요할 때만 동기화를 켤 수 있습니다. 클라우드 사용은 옵트인 방식이며 범위도 제어 가능합니다.',
          exportTag: '내보내기',
          exportMeta: '지식 흐름',
          exportTitle: `${exportFact.label}: ${exportFact.value}`,
          exportBody: '하이라이트와 북마크를 Notion으로 보내 읽기 결과를 메모, 복습, 작성 워크플로에 연결할 수 있습니다.'
        };
      }
      return {
        openLabel: 'Open',
        coverLabel: 'Cover',
        prevLabel: 'Prev',
        nextLabel: 'Next',
        coverStrip: ['AI Summary', 'Skim read', 'Products', 'Sync', 'Export'],
        coverEmboss: 'summary · skim · products · storage · sync · export',
        summaryTag: 'AI Summary',
        summaryMeta: 'Streaming',
        summaryTitle: 'What this app does',
        summaryStream: `Lan Read turns your ePub / txt library into a conversational reading companion.\n\nOpen a title and it generates an AI summary so you get orientation before deep reading. Then Skim read helps you scan chapter skeletons fast, while optional iCloud sync and Notion export keep your reading flow portable without breaking a local-first default.`,
        summaryPoints: [
          'Instant orientation from AI summaries',
          'Skim chapter skeletons before diving in',
          'Sync and export stay optional by design'
        ],
        skimTag: 'Skim read',
        skimMeta: 'Chapter skeleton',
        skimTitle: 'Map quickly, then dive where it matters',
        skimBody: 'Skim read compresses chapters into structural cues so you can find priorities, arguments, and terms in minutes instead of paging line by line.',
        skimPills: ['Chapter-level snapshots', 'Fast context jump', 'Filter first, deep read next'],
        platformsTag: 'Products',
        platformsMeta: 'Coverage',
        platformsTitle: 'Products: iPhone / iPad (Mac planned)',
        platformsBody: 'This is presented as product surfaces, not OS labels: iPhone is optimized for quick one-hand sessions, while iPad is tuned for long-form and split-view reading.',
        platformsImageAlt: 'Lan Read product surfaces on iPhone and iPad',
        platformsImageCaption: 'Product focus: iPhone + iPad, with Mac in planning.',
        storageTag: 'Storage',
        storageMeta: 'Local-first',
        storageTitle: `${storageFact.label}: ${storageFact.value}`,
        storageBody: 'You can start reading without account setup. Books and reading traces stay local by default until you explicitly choose a cloud path.',
        syncTag: 'Sync',
        syncMeta: 'Optional cloud',
        syncTitle: `${syncFact.label}: ${syncFact.value}`,
        syncBody: 'Enable sync only when you need cross-device continuity. The model is opt-in and scoped, so cloud involvement stays user-controlled.',
        exportTag: 'Export',
        exportMeta: 'Knowledge flow',
        exportTitle: `${exportFact.label}: ${exportFact.value}`,
        exportBody: 'Highlights and bookmarks can move into Notion so reading output flows directly into your note, review, and writing process.'
      };
    };

    const updateBookControls = (index) => {
      const total = String(bookPages.length).padStart(2, '0');
      const current = String(index + 1).padStart(2, '0');
      if (bookCounter) bookCounter.textContent = `${current} / ${total}`;

      const canBackToCover = bookOpen && index === 0;
      if (bookPrevLabel && currentBookLocale) {
        bookPrevLabel.textContent = canBackToCover ? currentBookLocale.coverLabel : currentBookLocale.prevLabel;
      }
      if (bookPrevButton && currentBookLocale) {
        bookPrevButton.setAttribute('aria-label', canBackToCover ? currentBookLocale.coverLabel : currentBookLocale.prevLabel);
      }
      if (bookPrevButton) bookPrevButton.disabled = !bookOpen;
      if (bookNextButton) bookNextButton.disabled = bookOpen && index === bookPages.length - 1;
    };

    const setBookPage = (index) => {
      bookPages.forEach((page, pageIndex) => {
        page.classList.toggle('is-active', pageIndex === index);
        page.classList.remove('page-out-next', 'page-out-prev', 'page-in-next', 'page-in-prev');
      });
      currentBookPage = index;
      updateBookControls(index);
    };

    const runSummaryStream = (text) => {
      if (!summaryStream) return;
      streamToken += 1;
      const token = streamToken;
      if (streamTimer) clearInterval(streamTimer);
      summaryStream.textContent = '';
      summaryStream.classList.add('is-typing');
      let cursor = 0;
      streamTimer = setInterval(() => {
        if (token !== streamToken) {
          clearInterval(streamTimer);
          streamTimer = null;
          return;
        }
        cursor += 1;
        summaryStream.textContent = text.slice(0, cursor);
        if (cursor >= text.length) {
          clearInterval(streamTimer);
          streamTimer = null;
          summaryStream.classList.remove('is-typing');
        }
      }, 17);
    };

    const renderBook = (t, lang) => {
      const b = bookLocale(lang, t);
      currentBookLocale = b;

      if (bookOpenLabel) bookOpenLabel.textContent = b.openLabel;
      if (bookPrevLabel) bookPrevLabel.textContent = b.prevLabel;
      if (bookNextLabel) bookNextLabel.textContent = b.nextLabel;
      if (bookOpenTrigger) bookOpenTrigger.setAttribute('aria-label', b.openLabel);
      if (bookPrevButton) bookPrevButton.setAttribute('aria-label', b.prevLabel);
      if (bookNextButton) bookNextButton.setAttribute('aria-label', b.nextLabel);

      if (coverStrip) {
        coverStrip.innerHTML = b.coverStrip.map(item => `<span>${item}</span>`).join('');
      }
      if (coverEmboss) coverEmboss.textContent = b.coverEmboss;

      if (summaryTag) summaryTag.textContent = b.summaryTag;
      if (summaryMeta) summaryMeta.textContent = b.summaryMeta;
      if (summaryTitle) summaryTitle.textContent = b.summaryTitle;
      if (summaryPoints) {
        summaryPoints.innerHTML = b.summaryPoints.map(line => `<li>${line}</li>`).join('');
      }

      if (skimTag) skimTag.textContent = b.skimTag;
      if (skimMeta) skimMeta.textContent = b.skimMeta;
      if (skimTitle) skimTitle.textContent = b.skimTitle;
      if (skimBody) skimBody.textContent = b.skimBody;
      if (skimPills) skimPills.innerHTML = b.skimPills.map(line => `<div class="page-pill">${line}</div>`).join('');

      if (platformsTag) platformsTag.textContent = b.platformsTag;
      if (platformsMeta) platformsMeta.textContent = b.platformsMeta;
      if (platformsTitle) platformsTitle.textContent = b.platformsTitle;
      if (platformsBody) platformsBody.textContent = b.platformsBody;
      if (platformsImage) platformsImage.setAttribute('alt', b.platformsImageAlt || '');
      if (platformsImageCaption) platformsImageCaption.textContent = b.platformsImageCaption || '';

      if (storageTag) storageTag.textContent = b.storageTag;
      if (storageMeta) storageMeta.textContent = b.storageMeta;
      if (storageTitle) storageTitle.textContent = b.storageTitle;
      if (storageBody) storageBody.textContent = b.storageBody;

      if (syncTag) syncTag.textContent = b.syncTag;
      if (syncMeta) syncMeta.textContent = b.syncMeta;
      if (syncTitle) syncTitle.textContent = b.syncTitle;
      if (syncBody) syncBody.textContent = b.syncBody;

      if (exportTag) exportTag.textContent = b.exportTag;
      if (exportMeta) exportMeta.textContent = b.exportMeta;
      if (exportTitle) exportTitle.textContent = b.exportTitle;
      if (exportBody) exportBody.textContent = b.exportBody;

      if (!bookOpen) {
        streamToken += 1;
        if (streamTimer) {
          clearInterval(streamTimer);
          streamTimer = null;
        }
        if (summaryStream) {
          summaryStream.textContent = '';
          summaryStream.classList.remove('is-typing');
        }
      } else if (currentBookPage === 0) {
        runSummaryStream(b.summaryStream);
      }
      updateBookControls(currentBookPage);
    };

    const openBook = () => {
      if (bookOpen || !heroBook) return;
      bookOpen = true;
      heroBook.classList.add('is-open');
      setBookPage(0);
      if (currentBookLocale) runSummaryStream(currentBookLocale.summaryStream);
    };

    const closeBook = () => {
      if (!bookOpen || !heroBook) return;
      bookOpen = false;
      heroBook.classList.remove('is-open');
      streamToken += 1;
      if (streamTimer) {
        clearInterval(streamTimer);
        streamTimer = null;
      }
      if (summaryStream) {
        summaryStream.textContent = '';
        summaryStream.classList.remove('is-typing');
      }
      setBookPage(0);
    };

    const flipBookPage = (direction) => {
      if (!bookOpen) return;
      if (direction === 'prev' && currentBookPage === 0) {
        closeBook();
        return;
      }
      const nextIndex = direction === 'next' ? currentBookPage + 1 : currentBookPage - 1;
      if (nextIndex < 0 || nextIndex >= bookPages.length) return;

      const currentEl = bookPages[currentBookPage];
      const nextEl = bookPages[nextIndex];
      currentEl.classList.remove('page-out-next', 'page-out-prev', 'page-in-next', 'page-in-prev');
      nextEl.classList.remove('page-out-next', 'page-out-prev', 'page-in-next', 'page-in-prev');

      currentEl.classList.add(direction === 'next' ? 'page-out-next' : 'page-out-prev');
      nextEl.classList.add(direction === 'next' ? 'page-in-next' : 'page-in-prev');

      currentEl.classList.remove('is-active');
      nextEl.classList.add('is-active');
      currentBookPage = nextIndex;
      updateBookControls(nextIndex);

      setTimeout(() => {
        currentEl.classList.remove('page-out-next', 'page-out-prev');
        nextEl.classList.remove('page-in-next', 'page-in-prev');
      }, 430);

      if (nextIndex === 0 && currentBookLocale) runSummaryStream(currentBookLocale.summaryStream);
      else {
        streamToken += 1;
        if (streamTimer) {
          clearInterval(streamTimer);
          streamTimer = null;
        }
        if (summaryStream) summaryStream.classList.remove('is-typing');
      }
    };

    const applyLanguage = (lang) => {
      const chosen = content[lang] ? lang : (content.en ? 'en' : 'en');
      const t = content[chosen] || fallbackEn;
      const htmlLangMap = { en: 'en', zh: 'zh-Hans', ja: 'ja', ko: 'ko' };
      document.documentElement.lang = htmlLangMap[chosen] || 'en';
      languageSelect.value = chosen;

      document.title = t.meta?.title || fallbackEn.meta.title;
      const metaDesc = document.querySelector('meta[name="description"]');
      if (metaDesc) metaDesc.setAttribute('content', t.meta?.description || '');

      setText('[data-key="brand.name"]', t.brand?.name);
      setText('[data-key="nav.features"]', t.nav?.features);
      setText('[data-key="nav.workflow"]', t.nav?.workflow);
      setText('[data-key="nav.language"]', t.nav?.language);

      setText('[data-key="labels.fieldnote"]', t.labels?.fieldnote);
      setText('[data-key="labels.chapters"]', t.labels?.chapters);
      setText('[data-key="labels.notebook"]', t.labels?.notebook);
      setText('[data-key="labels.privacy"]', t.labels?.privacy);

      setText('[data-key="hero.title"]', t.hero?.title);
      setText('[data-key="hero.subtitle"]', t.hero?.subtitle);
      setText('[data-key="hero.primaryCta"]', t.hero?.primaryCta);
      setText('[data-key="hero.secondaryCta"]', t.hero?.secondaryCta);

      setText('[data-key="features.title"]', t.features?.title);
      setText('[data-key="workflow.title"]', t.workflow?.title);

      if (visionLine) visionLine.textContent = t.vision || '';

      renderFacts(t.facts);
      renderFeatures(t.features, chosen);
      renderWorkflow(t.workflow);
      renderPrivacy(t.privacy);
      renderBook(t, chosen);

      setText('[data-key="footer.note"]', t.footer?.note);
      setText('[data-key="footer.privacy"]', t.footer?.privacy);
      setText('[data-key="footer.terms"]', t.footer?.terms);
      setText('[data-key="footer.changelog"]', t.footer?.changelog);
      setText('[data-key="footer.support"]', t.footer?.support);

      localStorage.setItem('lanread-lang', chosen);
    };

    (async () => {
      await Promise.all([loadLanguageFile('en'), loadLanguageFile('zh'), loadLanguageFile('ja'), loadLanguageFile('ko')]);
      applyLanguage(localStorage.getItem('lanread-lang') || 'en');
      setBookPage(0);
    })();

    languageSelect.addEventListener('change', (e) => applyLanguage(e.target.value));
    if (bookOpenTrigger) {
      bookOpenTrigger.addEventListener('click', (e) => {
        e.preventDefault();
        openBook();
      });
    }
    if (bookNextButton) {
      bookNextButton.addEventListener('click', () => {
        if (!bookOpen) {
          openBook();
          return;
        }
        flipBookPage('next');
      });
    }
    if (bookPrevButton) {
      bookPrevButton.addEventListener('click', () => flipBookPage('prev'));
    }
  </script>
</body>
</html>
